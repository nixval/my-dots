# -----------------------------------------------------
# Window & Layer Rules
# -----------------------------------------------------
# Wiki: https://wiki.hypr.land/Configuring/Window-Rules/
#
# We use 'windowrulev2' because it's newer, faster, and cleaner.
# Syntax: windowrulev2 = RULE, MATCHER
# -----------------------------------------------------

# -----------------------------------------------------
# 1. COMMON SENSE RULES (Default Behavior)
# -----------------------------------------------------

# --- Smart Floating (Dialogs & Popups) ---
# Automatically float standard dialogs, file pickers, etc.
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = float, class:^(xdg-desktop-portal-kde)$
windowrulev2 = float, class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = float, class:^(pavucontrol)$
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = float, class:^(nm-applet)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = float, class:^(org.gnome.Calculator)$
windowrulev2 = float, class:^(lxqt-policykit-agent)$

# --- Picture-in-Picture (Firefox/Chrome) ---
# Float, pin, and move to corner.
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin, title:^(Picture-in-Picture)$
windowrulev2 = move 100%-w-10 100%-h-10, title:^(Picture-in-Picture)$
windowrulev2 = size 30% 30%, title:^(Picture-in-Picture)$

# --- Media & Games ---
# Prevent idle (screen lock) when watching videos or gaming fullscreen
windowrulev2 = idleinhibit fullscreen, class:^(*)$
windowrulev2 = idleinhibit always, class:^(YouTube)$
windowrulev2 = idleinhibit always, title:^(.*YouTube.*)$

# --- XWayland Video Bridge (Screen Sharing fix) ---
# Hides the "bridge" window used by some tools to share screens
windowrulev2 = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrulev2 = noanim, class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus, class:^(xwaylandvideobridge)$
windowrulev2 = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrulev2 = noblur, class:^(xwaylandvideobridge)$

# -----------------------------------------------------
# 2. VISUAL TWEAKS (Opacity & Blur)
# -----------------------------------------------------

# Example: Make terminal slightly transparent
# windowrulev2 = opacity 0.90 0.90, class:^(kitty)$

# Example: Opaque for video players (Better performance/color)
windowrulev2 = opaque, class:^(vlc)$
windowrulev2 = opaque, class:^(mpv)$

# -----------------------------------------------------
# 3. LAYER RULES (Bar, Rofi, Notifications)
# -----------------------------------------------------
# Applies to "Layers" (not normal windows), like Waybar or Rofi.
# Syntax: layerrule = RULE, ADDRESS/NAMESPACE

# --- Waybar ---
# Blur the background of the bar (Glassy look)
layerrule = blur, waybar
layerrule = ignorezero, waybar # Don't blur 100% transparent parts

# --- Rofi / Launcher ---
layerrule = blur, rofi
layerrule = ignorezero, rofi
# layerrule = dimaround, rofi # Dim the screen when launcher is open

# --- Notifications (SwayNC / Dunst) ---
layerrule = blur, swaync-control-center
layerrule = blur, swaync-notification-window
layerrule = ignorezero, swaync-control-center
layerrule = ignorezero, swaync-notification-window

# -----------------------------------------------------
# 4. REFERENCE / CHEATSHEET (Uncomment to use)
# -----------------------------------------------------
# A list of useful rules for your copy-paste pleasure.

# --- Actions ---
# float                 -> forces window to float
# tile                  -> forces window to tile
# fullscreen            -> forces fullscreen
# maximize              -> maximizes (keeps gaps/bar)
# move X Y              -> moves floating window (e.g. 100 100)
# size W H              -> resizes floating window (e.g. 800 600)
# center                -> centers the window
# pseudo                -> enable pseudo tiling
# monitor X             -> force window to monitor X (0, 1, etc)
# workspace X           -> force window to workspace X
# opacity A [B] [C]     -> A=active, B=inactive, C=fullscreen
# noblur                -> disable blur
# noborder              -> disable border
# noshadow              -> disable shadow
# noanim                -> disable animation
# pin                   -> pin to all workspaces (sticky)
# stayfocused           -> keep focus even if mouse moves away

# --- Matchers (Regex supported) ---
# class:^(regex)$       -> match by window class (App name)
# title:^(regex)$       -> match by window title
# initialTitle:^()$     -> match by initial title (good for apps that change title)
# initialClass:^()$     -> match by initial class
# floating:1            -> match only floating windows
# fullscreen:1          -> match only fullscreen windows
# pinned:1              -> match only pinned windows
# workspace:name        -> match windows on specific workspace
